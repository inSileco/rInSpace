<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.2 Import spatial data from .csv file | R in Space - Custom mapping</title>
  <meta name="description" content="4.2 Import spatial data from .csv file | R in Space - Custom mapping" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="4.2 Import spatial data from .csv file | R in Space - Custom mapping" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.2 Import spatial data from .csv file | R in Space - Custom mapping" />
  
  
  

<meta name="author" content="David Beauchesne, Mari-Hélène, Nicolas Casajus, Kevin Caelles, Elliot Dreujou, Steve Vissault" />


<meta name="date" content="2023-02-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reading-and-writing-spatial-objects-with-sf-and-raster.html"/>
<link rel="next" href="import-shapefile-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/extra.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="#">R in Space</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="so-it-begins.html"><a href="so-it-begins.html"><i class="fa fa-check"></i><b>1.1</b> So it begins</a></li>
<li class="chapter" data-level="1.2" data-path="beginner-course.html"><a href="beginner-course.html"><i class="fa fa-check"></i><b>1.2</b> Beginner course</a></li>
<li class="chapter" data-level="1.3" data-path="advanced-course.html"><a href="advanced-course.html"><i class="fa fa-check"></i><b>1.3</b> Advanced course</a></li>
<li class="chapter" data-level="1.4" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>1.4</b> SessionInfo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>2</b> Useful resources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html"><i class="fa fa-check"></i><b>2.1</b> The mapping landscape has changed!</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#geographic-information-system-gis"><i class="fa fa-check"></i><b>2.1.1</b> Geographic Information System (GIS)</a></li>
<li class="chapter" data-level="2.1.2" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#web-mapping-tools"><i class="fa fa-check"></i><b>2.1.2</b> Web mapping tools</a></li>
<li class="chapter" data-level="2.1.3" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#specific-packages-of-various-programming-languages"><i class="fa fa-check"></i><b>2.1.3</b> Specific packages of various programming languages</a>
<ul>
<li class="chapter" data-level="2.1.3.1" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#cc-libraries"><i class="fa fa-check"></i><b>2.1.3.1</b> C/C++ libraries:</a></li>
<li class="chapter" data-level="2.1.3.2" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#javascript"><i class="fa fa-check"></i><b>2.1.3.2</b> JavaScript:</a></li>
<li class="chapter" data-level="2.1.3.3" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#julia-packages"><i class="fa fa-check"></i><b>2.1.3.3</b> Julia packages</a></li>
<li class="chapter" data-level="2.1.3.4" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#python-packages"><i class="fa fa-check"></i><b>2.1.3.4</b> Python packages</a></li>
</ul></li>
<li class="chapter" data-level="2.1.4" data-path="the-mapping-landscape-has-changed.html"><a href="the-mapping-landscape-has-changed.html#free-gis-data"><i class="fa fa-check"></i><b>2.1.4</b> Free GIS data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="so-why-use-r-for-mapping.html"><a href="so-why-use-r-for-mapping.html"><i class="fa fa-check"></i><b>2.2</b> So… why use R for mapping?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="about-spatial-data.html"><a href="about-spatial-data.html"><i class="fa fa-check"></i><b>3</b> About spatial data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vector-data.html"><a href="vector-data.html"><i class="fa fa-check"></i><b>3.1</b> Vector data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vector-data.html"><a href="vector-data.html#points-data"><i class="fa fa-check"></i><b>3.1.1</b> Points data</a></li>
<li class="chapter" data-level="3.1.2" data-path="vector-data.html"><a href="vector-data.html#lines-data"><i class="fa fa-check"></i><b>3.1.2</b> Lines data</a></li>
<li class="chapter" data-level="3.1.3" data-path="vector-data.html"><a href="vector-data.html#polygons-data"><i class="fa fa-check"></i><b>3.1.3</b> Polygons data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="raster-data.html"><a href="raster-data.html"><i class="fa fa-check"></i><b>3.2</b> Raster data</a></li>
<li class="chapter" data-level="3.3" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html"><i class="fa fa-check"></i><b>3.3</b> Vector objects in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#package-sp"><i class="fa fa-check"></i><b>3.3.1</b> Package <code>sp</code></a>
<ul>
<li class="chapter" data-level="3.3.1.1" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#classes"><i class="fa fa-check"></i><b>3.3.1.1</b> Classes</a></li>
<li class="chapter" data-level="3.3.1.2" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#spatialpointsdataframe"><i class="fa fa-check"></i><b>3.3.1.2</b> <code>SpatialPointsDataFrame</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3.2" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#package-sf"><i class="fa fa-check"></i><b>3.3.2</b> Package <code>sf</code></a>
<ul>
<li class="chapter" data-level="3.3.2.1" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#class-sf"><i class="fa fa-check"></i><b>3.3.2.1</b> Class <code>sf</code></a></li>
<li class="chapter" data-level="3.3.2.2" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#class-sfc"><i class="fa fa-check"></i><b>3.3.2.2</b> Class <code>sfc</code></a></li>
<li class="chapter" data-level="3.3.2.3" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#class-sfg"><i class="fa fa-check"></i><b>3.3.2.3</b> Class <code>sfg</code></a></li>
<li class="chapter" data-level="3.3.2.4" data-path="vector-objects-in-r.html"><a href="vector-objects-in-r.html#how-to-import-a-sp-object"><i class="fa fa-check"></i><b>3.3.2.4</b> How to import a <code>sp</code> object</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="raster-objects-in-r.html"><a href="raster-objects-in-r.html"><i class="fa fa-check"></i><b>3.4</b> Raster objects in R</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="raster-objects-in-r.html"><a href="raster-objects-in-r.html#rasterlayer"><i class="fa fa-check"></i><b>3.4.1</b> RasterLayer</a></li>
<li class="chapter" data-level="3.4.2" data-path="raster-objects-in-r.html"><a href="raster-objects-in-r.html#rasterstack-and-rasterbrick"><i class="fa fa-check"></i><b>3.4.2</b> RasterStack and RasterBrick</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="import-spatial-objects.html"><a href="import-spatial-objects.html"><i class="fa fa-check"></i><b>4</b> Import spatial objects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reading-and-writing-spatial-objects-with-sf-and-raster.html"><a href="reading-and-writing-spatial-objects-with-sf-and-raster.html"><i class="fa fa-check"></i><b>4.1</b> Reading and writing spatial objects with <code>sf</code> and <code>raster</code></a></li>
<li class="chapter" data-level="4.2" data-path="import-spatial-data-from-.csv-file.html"><a href="import-spatial-data-from-.csv-file.html"><i class="fa fa-check"></i><b>4.2</b> Import spatial data from .csv file</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="import-spatial-data-from-.csv-file.html"><a href="import-spatial-data-from-.csv-file.html#convert-a-data-frame-to-simple-feature-objects"><i class="fa fa-check"></i><b>4.2.1</b> Convert a data frame to simple feature objects</a></li>
<li class="chapter" data-level="4.2.2" data-path="import-spatial-data-from-.csv-file.html"><a href="import-spatial-data-from-.csv-file.html#export-your-points-in-a-shapefile"><i class="fa fa-check"></i><b>4.2.2</b> Export your points in a Shapefile</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="import-shapefile-data.html"><a href="import-shapefile-data.html"><i class="fa fa-check"></i><b>4.3</b> Import Shapefile data</a></li>
<li class="chapter" data-level="4.4" data-path="import-geojson-file.html"><a href="import-geojson-file.html"><i class="fa fa-check"></i><b>4.4</b> Import GeoJSON file</a></li>
<li class="chapter" data-level="4.5" data-path="import-raster-data.html"><a href="import-raster-data.html"><i class="fa fa-check"></i><b>4.5</b> Import raster data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-mapping.html"><a href="basic-mapping.html"><i class="fa fa-check"></i><b>5</b> Basic mapping</a>
<ul>
<li class="chapter" data-level="5.1" data-path="plot-methods-for-sp-objects.html"><a href="plot-methods-for-sp-objects.html"><i class="fa fa-check"></i><b>5.1</b> Plot methods for <code>sp</code> objects</a></li>
<li class="chapter" data-level="5.2" data-path="plot-methods-for-sf-objects.html"><a href="plot-methods-for-sf-objects.html"><i class="fa fa-check"></i><b>5.2</b> plot methods for <code>sf</code> objects</a></li>
<li class="chapter" data-level="5.3" data-path="plot-methods-for-raster-objects.html"><a href="plot-methods-for-raster-objects.html"><i class="fa fa-check"></i><b>5.3</b> plot methods for <code>raster</code> objects</a></li>
<li class="chapter" data-level="5.4" data-path="plotting-together-sf-and-raster-objects.html"><a href="plotting-together-sf-and-raster-objects.html"><i class="fa fa-check"></i><b>5.4</b> plotting together <code>sf</code> and <code>raster</code> objects</a></li>
<li class="chapter" data-level="5.5" data-path="package-mapview.html"><a href="package-mapview.html"><i class="fa fa-check"></i><b>5.5</b> Package <code>mapview</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="attribute-manipulations.html"><a href="attribute-manipulations.html"><i class="fa fa-check"></i><b>6</b> Attribute manipulations</a>
<ul>
<li class="chapter" data-level="6.1" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html"><i class="fa fa-check"></i><b>6.1</b> Spatial objects attributes manipulations</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html#vector-objects"><i class="fa fa-check"></i><b>6.1.1</b> Vector objects</a></li>
<li class="chapter" data-level="6.1.2" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html#adding-and-removing-attributes"><i class="fa fa-check"></i><b>6.1.2</b> Adding and removing attributes</a></li>
<li class="chapter" data-level="6.1.3" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html#subsets"><i class="fa fa-check"></i><b>6.1.3</b> Subsets</a></li>
<li class="chapter" data-level="6.1.4" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html#join"><i class="fa fa-check"></i><b>6.1.4</b> Join</a></li>
<li class="chapter" data-level="6.1.5" data-path="spatial-objects-attributes-manipulations.html"><a href="spatial-objects-attributes-manipulations.html#aggregate"><i class="fa fa-check"></i><b>6.1.5</b> Aggregate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geometry-manipulation.html"><a href="geometry-manipulation.html"><i class="fa fa-check"></i><b>7</b> Geometry manipulation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sp-objects.html"><a href="sp-objects.html"><i class="fa fa-check"></i><b>7.1</b> <code>sp</code> objects</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="sp-objects.html"><a href="sp-objects.html#subset"><i class="fa fa-check"></i><b>7.1.1</b> Subset</a></li>
<li class="chapter" data-level="7.1.2" data-path="sp-objects.html"><a href="sp-objects.html#unions"><i class="fa fa-check"></i><b>7.1.2</b> Unions</a></li>
<li class="chapter" data-level="7.1.3" data-path="sp-objects.html"><a href="sp-objects.html#buffers"><i class="fa fa-check"></i><b>7.1.3</b> Buffers</a></li>
<li class="chapter" data-level="7.1.4" data-path="sp-objects.html"><a href="sp-objects.html#intersections"><i class="fa fa-check"></i><b>7.1.4</b> Intersections</a></li>
<li class="chapter" data-level="7.1.5" data-path="sp-objects.html"><a href="sp-objects.html#differences"><i class="fa fa-check"></i><b>7.1.5</b> Differences</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="overlays.html"><a href="overlays.html"><i class="fa fa-check"></i><b>7.2</b> Overlays</a></li>
<li class="chapter" data-level="7.3" data-path="sf-objects.html"><a href="sf-objects.html"><i class="fa fa-check"></i><b>7.3</b> <code>sf</code> objects</a></li>
<li class="chapter" data-level="7.4" data-path="raster-objects.html"><a href="raster-objects.html"><i class="fa fa-check"></i><b>7.4</b> <code>raster</code> objects</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="raster-objects.html"><a href="raster-objects.html#extract-values"><i class="fa fa-check"></i><b>7.4.1</b> Extract values</a></li>
<li class="chapter" data-level="7.4.2" data-path="raster-objects.html"><a href="raster-objects.html#mask"><i class="fa fa-check"></i><b>7.4.2</b> Mask</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-data-resources.html"><a href="r-data-resources.html"><i class="fa fa-check"></i><b>8</b> R data resources</a>
<ul>
<li class="chapter" data-level="8.1" data-path="environmental-data.html"><a href="environmental-data.html"><i class="fa fa-check"></i><b>8.1</b> Environmental data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="environmental-data.html"><a href="environmental-data.html#abiotic-data"><i class="fa fa-check"></i><b>8.1.1</b> Abiotic data</a></li>
<li class="chapter" data-level="8.1.2" data-path="environmental-data.html"><a href="environmental-data.html#biotic-data"><i class="fa fa-check"></i><b>8.1.2</b> Biotic data</a></li>
<li class="chapter" data-level="8.1.3" data-path="environmental-data.html"><a href="environmental-data.html#base-maps"><i class="fa fa-check"></i><b>8.1.3</b> Base maps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="custom-mapping.html"><a href="custom-mapping.html"><i class="fa fa-check"></i><b>9</b> Custom mapping</a>
<ul>
<li class="chapter" data-level="9.1" data-path="creating-a-thematic-map.html"><a href="creating-a-thematic-map.html"><i class="fa fa-check"></i><b>9.1</b> Creating a thematic map</a></li>
<li class="chapter" data-level="9.2" data-path="add-a-temperature-raster.html"><a href="add-a-temperature-raster.html"><i class="fa fa-check"></i><b>9.2</b> Add a temperature raster</a></li>
<li class="chapter" data-level="9.3" data-path="crop-and-mask-the-temperature-raster-using-quebec-boundary..html"><a href="crop-and-mask-the-temperature-raster-using-quebec-boundary..html"><i class="fa fa-check"></i><b>9.3</b> Crop and mask the temperature raster using quebec boundary.</a></li>
<li class="chapter" data-level="9.4" data-path="creating-a-simple-layout.html"><a href="creating-a-simple-layout.html"><i class="fa fa-check"></i><b>9.4</b> Creating a simple layout</a></li>
<li class="chapter" data-level="9.5" data-path="examples-of-complex-layouts.html"><a href="examples-of-complex-layouts.html"><i class="fa fa-check"></i><b>9.5</b> Examples of complex layouts</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="examples-of-complex-layouts.html"><a href="examples-of-complex-layouts.html#setting-data-and-parameters"><i class="fa fa-check"></i><b>9.5.1</b> Setting data and parameters</a></li>
<li class="chapter" data-level="9.5.2" data-path="examples-of-complex-layouts.html"><a href="examples-of-complex-layouts.html#first-example"><i class="fa fa-check"></i><b>9.5.2</b> First example</a></li>
<li class="chapter" data-level="9.5.3" data-path="examples-of-complex-layouts.html"><a href="examples-of-complex-layouts.html#second-example"><i class="fa fa-check"></i><b>9.5.3</b> Second example</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R in Space - Custom mapping</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="import-spatial-data-from-.csv-file" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Import spatial data from .csv file<a href="import-spatial-data-from-.csv-file.html#import-spatial-data-from-.csv-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Spatial data are sometimes stored in a text file format (.txt or .csv), in such
case columns providing the coordinates must be included and the user must know
the CRS (Coordinate Reference System). A <code>sf</code> object allows us to store both
the coordinates of each point as well as associated attribute data, <em>i.e.</em>
columns describing each feature in the spatial object.</p>
<p>The dataset we work with below represents sampling points of a monitoring
program of water quality in Montreal (available <a href="http://donnees.ville.montreal.qc.ca/dataset/rsma-points-d-echantillonnage-ruisso/resource/adad6c48-fb48-40fc-a031-1ac870d978b4">here</a>).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb44-1"><a href="import-spatial-data-from-.csv-file.html#cb44-1"></a><span class="co"># Download csv file from web page in your working directory</span></span>
<span id="cb44-2"><a href="import-spatial-data-from-.csv-file.html#cb44-2"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">&quot;data/ruisso.csv&quot;</span>)) {</span>
<span id="cb44-3"><a href="import-spatial-data-from-.csv-file.html#cb44-3"></a>  <span class="fu">download.file</span>(</span>
<span id="cb44-4"><a href="import-spatial-data-from-.csv-file.html#cb44-4"></a>    <span class="st">&quot;https://data.montreal.ca/dataset/86843d31-4251-4002-b10d-620aaa751092/resource/adad6c48-fb48-40fc-a031-1ac870d978b4/download/stations_ruisso.csv&quot;</span>,</span>
<span id="cb44-5"><a href="import-spatial-data-from-.csv-file.html#cb44-5"></a>    <span class="at">destfile =</span> <span class="st">&quot;data/ruisso.csv&quot;</span></span>
<span id="cb44-6"><a href="import-spatial-data-from-.csv-file.html#cb44-6"></a>  )</span>
<span id="cb44-7"><a href="import-spatial-data-from-.csv-file.html#cb44-7"></a>}</span>
<span id="cb44-8"><a href="import-spatial-data-from-.csv-file.html#cb44-8"></a></span>
<span id="cb44-9"><a href="import-spatial-data-from-.csv-file.html#cb44-9"></a><span class="co"># Read csv file in R</span></span>
<span id="cb44-10"><a href="import-spatial-data-from-.csv-file.html#cb44-10"></a>pts <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ruisso.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">dec =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<div id="convert-a-data-frame-to-simple-feature-objects" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Convert a data frame to simple feature objects<a href="import-spatial-data-from-.csv-file.html#convert-a-data-frame-to-simple-feature-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The data frame containing sampling points can be converted into simple feature
objects using <code>st_as_sf()</code>. To do so, we need to specify where coordinates are,
<em>i.e.</em> columns <code>LATITUDE</code> and <code>LONGITUDE</code> as well as the CRS. In our example,
the CRS is specified in the <a href="http://donnees.ville.montreal.qc.ca/dataset/rsma-points-d-echantillonnage-ruisso/resource/adad6c48-fb48-40fc-a031-1ac870d978b4">metadata of the data set</a>: the <a href="http://www.nrcan.gc.ca/node/9791">datum</a> is WGS84 and the <a href="http://www.epsg.org/">EPSG</a> is <strong>4326</strong>.
Remember that without the CRS, you cannot locate correctly your coordinates on the
Earth’s surface. In the package <code>sf</code>, the reference system can be define using
the <code>proj4</code> format or directly with the EPSG code.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb45-1"><a href="import-spatial-data-from-.csv-file.html#cb45-1"></a>pts_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(</span>
<span id="cb45-2"><a href="import-spatial-data-from-.csv-file.html#cb45-2"></a>  <span class="at">x =</span> pts,</span>
<span id="cb45-3"><a href="import-spatial-data-from-.csv-file.html#cb45-3"></a>  <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;LONGITUDE&quot;</span>, <span class="st">&quot;LATITUDE&quot;</span>),</span>
<span id="cb45-4"><a href="import-spatial-data-from-.csv-file.html#cb45-4"></a>  <span class="at">crs =</span> <span class="dv">4326</span></span>
<span id="cb45-5"><a href="import-spatial-data-from-.csv-file.html#cb45-5"></a>)</span>
<span id="cb45-6"><a href="import-spatial-data-from-.csv-file.html#cb45-6"></a><span class="fu">head</span>(pts_sf)</span></code></pre></div>
<pre><code>#R&gt;  Simple feature collection with 6 features and 5 fields
#R&gt;  Geometry type: POINT
#R&gt;  Dimension:     XY
#R&gt;  Bounding box:  xmin: -73.93704 ymin: 45.43462 xmax: -73.9012 ymax: 45.45022
#R&gt;  Geodetic CRS:  WGS 84
#R&gt;          Plan.d.eau Point.d.échantillonnage
#R&gt;  1 Rivière à l&#39;Orme                 AAO-0.0
#R&gt;  2 Rivière à l&#39;Orme               AAO-1.5P1
#R&gt;  3 Rivière à l&#39;Orme               AAO-2.0P4
#R&gt;  4 Rivière à l&#39;Orme               AAO-3.3P6
#R&gt;  5 Rivière à l&#39;Orme                 AAO-3.5
#R&gt;  6 Rivière à l&#39;Orme                 AAO-3.6
#R&gt;                                                                                                            Localisation
#R&gt;  1            Pierrefonds, boul. Gouin O, 40m au nord de la rue de l&#39;Anse à l&#39;Orme, exutoire au lac des Deux Montagnes.
#R&gt;  2                             Pierrefonds, N ponceau boul.Gouin, 1500m en amont exutoire,  branche provenant de l&#39;est.
#R&gt;  3                            Ste-A.-de-Bellevue, branche drainant secteur ouest, 140m à l&#39;est de la rue Leslie Dowker.
#R&gt;  4 Kirkland, 60m au sud de l&#39;intersection des rues de l&#39;Anse à l&#39;Orme et de Timberley trail, derrière le dépôt à neige.
#R&gt;  5                          Sainte-Anne-de-Bellevue, 10m au nord du ch. Ste-Marie, 200m à l&#39;ouest du ch. Anse à l&#39;Orme.
#R&gt;  6                       Beaconsfield, 250m à l&#39;est de la rue Lee et 25m au sud de l&#39;autoroute 40, en amont du pluvial.
#R&gt;             Administration Activité                   geometry
#R&gt;  1     Pierrefonds-Roxboro    Actif POINT (-73.93704 45.45022)
#R&gt;  2     Pierrefonds-Roxboro  Inactif POINT (-73.91931 45.44744)
#R&gt;  3 Sainte-Anne-de-Bellevue  Inactif POINT (-73.91535 45.44288)
#R&gt;  4                Kirkland    Actif POINT (-73.90147 45.43689)
#R&gt;  5 Sainte-Anne-de-Bellevue    Actif POINT (-73.90144 45.43566)
#R&gt;  6             Baie d&#39;Urfé    Actif  POINT (-73.9012 45.43462)</code></pre>
<p>As you can see, we now have a <code>MULTIPOINT</code> geometry, and the spatial information
is now stored in a simple feature list-column (<code>sfc</code>). The other columns contain
all the attributes related to the sample points.</p>
<p>The default plot of a simple features object is a multi-facet of all attributes.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb47-1"><a href="import-spatial-data-from-.csv-file.html#cb47-1"></a><span class="fu">plot</span>(pts_sf)</span></code></pre></div>
<p><img src="rInSpace_files/figure-html/plot_pts-1.svg" width="672" /></p>
<p>As you can see, instead of creating a single map, as with sp object, the
default plot of sf object creates multiple maps, one for each attribute,
which can sometimes be useful for exploring the spatial distribution of different
variables.</p>
</div>
<div id="export-your-points-in-a-shapefile" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Export your points in a Shapefile<a href="import-spatial-data-from-.csv-file.html#export-your-points-in-a-shapefile" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can write a simple features object to a file (<em>e.g.</em> a shapefile) using the
<code>st_write()</code> function in <code>sf</code>, which needs at least two arguments, the object
and a filename:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb48-1"><a href="import-spatial-data-from-.csv-file.html#cb48-1"></a><span class="fu">st_write</span>(pts_sf, <span class="st">&quot;data/pts_sf.shp&quot;</span>, <span class="at">delete_dsn =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>#R&gt;  Warning in abbreviate(fld_names, minlength = 7): abbreviate used with non-ASCII
#R&gt;  chars</code></pre>
<pre><code>#R&gt;  Warning in abbreviate_shapefile_names(obj): Field names abbreviated for ESRI
#R&gt;  Shapefile driver</code></pre>
<pre><code>#R&gt;  Deleting source `data/pts_sf.shp&#39; using driver `ESRI Shapefile&#39;
#R&gt;  Writing layer `pts_sf&#39; to data source `data/pts_sf.shp&#39; using driver `ESRI Shapefile&#39;
#R&gt;  Writing 66 features with 5 fields and geometry type Point.</code></pre>
<p>Note that <code>st_write()</code> selected one driver base on the file extension provided.
The driver can also be made explicit using the <code>driver</code> argument like so:
<code>st_write(pts_sf, "import/pts_sf.shp", driver = "ESRI Shapefile")</code>. Last but not
least, in order to have details about drivers available, have a look at the data
frame <code>st_drivers()</code> returns.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reading-and-writing-spatial-objects-with-sf-and-raster.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="import-shapefile-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Cours_SpatialR.pdf", "pdf"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true,
"edit": "https://github.com/sci1031/sci1031/edit/master/%s"
}
});
});
</script>

</body>

</html>
